[{"name":"/Pages/QR-Code","nodes":[{"id":"e7166d36-0977-2637-c065-89a1688edc23","type":"Page","parameters":{"paddingTop":{"value":25,"unit":"px"},"paddingRight":{"value":0,"unit":"px"},"urlPath":"give"},"ports":[],"children":[{"id":"3c61a67f-b483-416c-f863-7435a461e071","type":"/Pages/QR-Code/OrgDetails","parameters":{},"ports":[],"children":[]},{"id":"e4689dfc-eb00-3dfb-8343-cd35474b0741","type":"Text","parameters":{"textStyle":"Title Large","textAlignX":"center"},"ports":[],"children":[]},{"id":"52a35d8b-aae2-5469-e699-3d76741623f4","type":"Group","parameters":{"sizeMode":"contentHeight","marginTop":{"value":20,"unit":"px"},"marginBottom":{"value":15,"unit":"px"},"alignY":"center"},"ports":[],"children":[{"id":"59638d69-f678-e093-2824-d6443d34eff9","type":"Group","parameters":{"sizeMode":"contentHeight"},"ports":[],"children":[{"id":"ed0936f2-ebbb-a6ad-bcb1-7b166b03e859","type":"For Each","parameters":{"template":"/#Visual Component/product List","inputMappingScript":"// Here you add mappings between the properties of the item objects and the inputs of the components.\n// 'myComponentInput': 'myObjectProperty',\n// 'anotherComponentInput': function () { return object.get('someProperty') + ' ' + object.get('otherProp') }\n// These are the default mappings based on the selected template component.\nmap({\n\t'array': 'array',\n\n})\n"},"ports":[],"children":[]}]}]},{"id":"02b01ad9-86cf-9bd4-e52a-5153c2dbac38","type":"Group","parameters":{"sizeMode":"contentHeight","alignY":"bottom"},"ports":[],"children":[{"id":"55a39cc9-211c-d9b9-90d5-089f73e1a62a","type":"Group","parameters":{"alignItems":"center","sizeMode":"contentSize","alignX":"center","marginBottom":{"value":30,"unit":"px"}},"ports":[],"children":[{"id":"11b3708d-c823-60ab-874b-a034b4b14ca1","type":"Text","parameters":{"sizeMode":"contentSize","marginBottom":{"value":16,"unit":"px"}},"ports":[],"children":[]},{"id":"acc13edb-94e5-ad0c-9b0c-307a0882d5b4","type":"Text","parameters":{},"ports":[],"children":[]},{"id":"ba05cddd-a6b8-36a4-5445-125da8a711ed","type":"Group","parameters":{"flexDirection":"row","sizeMode":"contentHeight","alignItems":"center","alignX":"center","width":{"value":80,"unit":"%"},"justifyContent":"center"},"ports":[],"children":[{"id":"5c9082fc-84a6-cd7b-6f46-0891c9ca3617","type":"net.noodl.controls.button","variant":"MoneyButton","parameters":{"sizeMode":"explicit","width":{"value":60,"unit":"px"},"height":{"value":60,"unit":"px"},"label":"+","useLabel":false,"useIcon":true,"iconIconSource":{"class":"material-icons","code":"remove","codeAsClass":false},"iconSize":{"value":40,"unit":"px"},"backgroundColor":"Success"},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"children":[]},{"id":"9feebf84-5bac-9a69-7c8c-f06d3b43f129","type":"Text","parameters":{"sizeMode":"contentSize","textStyle":"Title Large","marginLeft":{"value":21,"unit":"px"},"marginRight":{"value":21,"unit":"px"}},"ports":[],"children":[]},{"id":"ccd2a74b-57da-309c-bcb2-70d7733417a0","type":"net.noodl.controls.button","variant":"MoneyButton","parameters":{"sizeMode":"explicit","width":{"value":60,"unit":"px"},"height":{"value":60,"unit":"px"},"label":"+","useLabel":false,"useIcon":true,"iconIconSource":{"class":"material-icons","code":"add","codeAsClass":false},"iconSize":{"value":40,"unit":"px"},"backgroundColor":"Success"},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"children":[]}]}]},{"id":"458e5984-55e8-c63a-383e-39aa07aa83a0","type":"Text","parameters":{},"ports":[],"children":[]},{"id":"1fc88291-cdb2-601c-1b0d-3b74692f4185","type":"net.noodl.controls.button","parameters":{"label":"refresh"},"ports":[],"children":[]},{"id":"04863008-1aee-1d00-eb84-962246f37f3e","type":"Group","parameters":{"mounted":false},"ports":[],"children":[{"id":"bdcc69ab-2b2c-d5bc-9907-a42d0e8497f9","type":"Group","parameters":{"sizeMode":"contentHeight","alignY":"bottom","marginBottom":{"value":31,"unit":"px"},"backgroundColor":"#D4170A","alignX":"center","alignItems":"center","paddingTop":{"value":20,"unit":"px"},"paddingBottom":{"value":20,"unit":"px"},"mounted":true},"ports":[],"children":[]},{"id":"3a6f3bfd-6877-253d-571e-3d5feb3b5966","type":"Group","parameters":{"sizeMode":"contentHeight","alignY":"bottom","marginBottom":{"value":31,"unit":"px"},"backgroundColor":"#5836F556","alignX":"center","alignItems":"center","paddingTop":{"value":20,"unit":"px"},"paddingBottom":{"value":20,"unit":"px"}},"ports":[],"children":[{"id":"b369c29d-8df2-d505-6949-84d8b7de83fb","type":"Group","parameters":{},"ports":[],"children":[]},{"id":"94df4f1e-3443-8955-7e80-e37315182f19","type":"net.noodl.controls.button","parameters":{"label":"Donate with Card","marginTop":{"value":25,"unit":"px"},"sizeMode":"contentWidth"},"ports":[],"children":[]}]}]}]}]},{"id":"07c2cfda-1a29-74c4-5198-66c0e0a82ff2","type":"PageInputs","parameters":{"pathParams":"qrcode","queryParams":"id"},"ports":[],"children":[]},{"id":"85ea32a7-c630-4b32-563a-b5359baafc5a","type":"Collection2","parameters":{"collectionId":"selection"},"ports":[],"children":[]},{"id":"2483fb7b-f3cf-006d-a70c-17c2578f7f6e","type":"JavaScriptFunction","parameters":{"functionScript":"const array = Inputs.Array || [];\nif (!array) return;\n\nlet sum = 0;\n\ntry {\n  array.forEach(item => {\n    if(item.price && typeof item.price === 'number') {\n      sum += item.price;\n    }\n    if (item.basePrice && typeof item.basePrice === 'number'){\n      sum += item.basePrice;\n    }\n  });\n  Outputs.Sum = sum;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"ports":[{"name":"in-Array","displayName":"Array","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Sum","displayName":"Sum","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":8}],"children":[]},{"id":"27897876-ad5e-6c96-9038-33b453e2090f","type":"String Format","parameters":{"format":"{count} Products selected"},"ports":[],"children":[]},{"id":"42008cb7-145c-c1f8-dea3-643d2576f115","type":"Set Variable","parameters":{"name":"price","setWith":"number"},"ports":[],"children":[]},{"id":"3c5fe197-8a4a-ba36-50e4-f61930836219","type":"Set Variable","parameters":{"name":"price","setWith":"number"},"ports":[],"children":[]},{"id":"b8ccd5b9-0b2c-335c-694d-a715a74cb007","type":"Variable2","parameters":{"name":"price"},"ports":[],"children":[]},{"id":"64d31424-b420-9b44-901e-bcc523f9a991","type":"JavaScriptFunction","parameters":{"functionScript":"// Define the current value, defaulting to 0 if no value is provided\nconst currentValue = Inputs.CurrentValue || 0;\n\n// Define the steps to add or subtract, defaulting to 1 if no value is provided\nconst steps = Inputs.Steps || 1;\n\n// Check if the Plus input signal is triggered\nif (Inputs.Plus) {\n  // Add the steps to the current value\n  Outputs.CurrentValue = currentValue + steps;\n  Outputs.Success();\n}\n\n// Check if the Remove input signal is triggered\nif (Inputs.Remove) {\n  // Subtract the steps from the current value\n  Outputs.CurrentValue = currentValue - steps;\n  Outputs.Success();\n}\n"},"ports":[{"name":"in-CurrentValue","displayName":"CurrentValue","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-Steps","displayName":"Steps","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-Plus","displayName":"Plus","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-Remove","displayName":"Remove","plug":"input","type":"*","group":"Inputs","index":7},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-CurrentValue","displayName":"CurrentValue","plug":"output","type":"*","group":"Outputs","index":9}],"children":[]},{"id":"1f7ebaf8-84df-3ef6-c8d4-13c258d3b001","type":"String Format","parameters":{"format":"â‚¬ {price}"},"ports":[],"children":[]},{"id":"1fbb4d60-2f12-7d81-e3bd-0ec77bf72ca3","type":"Expression","parameters":{"expression":"input > 1"},"ports":[],"children":[]},{"id":"78d42752-fe03-ab05-22a5-d339508275b6","type":"CloudFunction2","parameters":{"function":"CheckQR-Code"},"ports":[],"children":[]},{"id":"ef02af28-2b68-184e-a77e-7d6f79340401","type":"CloudFunction2","parameters":{"function":"qrCodeProducts"},"ports":[],"children":[]},{"id":"9545e4a2-e1e5-a818-7cd8-9edff285df50","type":"Set Variable","parameters":{"name":"count"},"ports":[],"children":[]},{"id":"5b17a736-ed19-2e43-c685-e3ee14d72764","type":"Number","parameters":{},"ports":[],"children":[]},{"id":"6449da6e-8b0f-acd8-4cc0-8f159f5eec54","type":"Condition","parameters":{},"ports":[],"children":[]},{"id":"a0d650c4-ba33-7797-d6a6-e7a49687ed57","type":"CloudFunction2","parameters":{"function":"getOrgDetails"},"ports":[],"children":[]},{"id":"ebcf8650-6d4d-2c30-d91f-1991dea0a09d","type":"RouterNavigate","parameters":{"router":"Main","target":"/Pages/NoValidCode"},"ports":[],"children":[]},{"id":"18370dc6-ea68-8287-a5d4-cb98e9137aee","type":"Switch","parameters":{},"ports":[],"children":[]},{"id":"f177c62d-3376-8f02-4252-e3e20aab9519","type":"/Pages/QR-Code/Extracted component","parameters":{"CheckoutType":"expressCheckout"},"ports":[],"children":[]},{"id":"41731cc8-c0a8-4c94-49ec-a5ea11c5b47b","type":"Condition","parameters":{},"ports":[],"children":[]},{"id":"97cdd6d4-9862-da83-2044-a10a2c78868e","type":"/Pages/QR-Code/Extracted component","parameters":{"CheckoutType":"payment"},"ports":[],"children":[]}],"connections":[{"sourceId":"ed0936f2-ebbb-a6ad-bcb1-7b166b03e859","sourcePort":"itemOutputSignal-SelectionChanged","targetId":"85ea32a7-c630-4b32-563a-b5359baafc5a","targetPort":"fetch"},{"sourceId":"85ea32a7-c630-4b32-563a-b5359baafc5a","sourcePort":"items","targetId":"2483fb7b-f3cf-006d-a70c-17c2578f7f6e","targetPort":"in-Array"},{"sourceId":"85ea32a7-c630-4b32-563a-b5359baafc5a","sourcePort":"count","targetId":"27897876-ad5e-6c96-9038-33b453e2090f","targetPort":"count"},{"sourceId":"27897876-ad5e-6c96-9038-33b453e2090f","sourcePort":"formatted","targetId":"11b3708d-c823-60ab-874b-a034b4b14ca1","targetPort":"text"},{"sourceId":"2483fb7b-f3cf-006d-a70c-17c2578f7f6e","sourcePort":"out-Sum","targetId":"42008cb7-145c-c1f8-dea3-643d2576f115","targetPort":"value"},{"sourceId":"2483fb7b-f3cf-006d-a70c-17c2578f7f6e","sourcePort":"out-Success","targetId":"42008cb7-145c-c1f8-dea3-643d2576f115","targetPort":"do"},{"sourceId":"b8ccd5b9-0b2c-335c-694d-a715a74cb007","sourcePort":"value","targetId":"64d31424-b420-9b44-901e-bcc523f9a991","targetPort":"in-CurrentValue"},{"sourceId":"5c9082fc-84a6-cd7b-6f46-0891c9ca3617","sourcePort":"onClick","targetId":"64d31424-b420-9b44-901e-bcc523f9a991","targetPort":"in-Remove"},{"sourceId":"ccd2a74b-57da-309c-bcb2-70d7733417a0","sourcePort":"onClick","targetId":"64d31424-b420-9b44-901e-bcc523f9a991","targetPort":"in-Plus"},{"sourceId":"64d31424-b420-9b44-901e-bcc523f9a991","sourcePort":"out-CurrentValue","targetId":"3c5fe197-8a4a-ba36-50e4-f61930836219","targetPort":"value"},{"sourceId":"64d31424-b420-9b44-901e-bcc523f9a991","sourcePort":"out-Success","targetId":"3c5fe197-8a4a-ba36-50e4-f61930836219","targetPort":"do"},{"sourceId":"b8ccd5b9-0b2c-335c-694d-a715a74cb007","sourcePort":"value","targetId":"1f7ebaf8-84df-3ef6-c8d4-13c258d3b001","targetPort":"price"},{"sourceId":"1f7ebaf8-84df-3ef6-c8d4-13c258d3b001","sourcePort":"formatted","targetId":"9feebf84-5bac-9a69-7c8c-f06d3b43f129","targetPort":"text"},{"sourceId":"1fbb4d60-2f12-7d81-e3bd-0ec77bf72ca3","sourcePort":"isTrue","targetId":"11b3708d-c823-60ab-874b-a034b4b14ca1","targetPort":"mounted"},{"sourceId":"07c2cfda-1a29-74c4-5198-66c0e0a82ff2","sourcePort":"pm-qrcode","targetId":"78d42752-fe03-ab05-22a5-d339508275b6","targetPort":"in-code"},{"sourceId":"e7166d36-0977-2637-c065-89a1688edc23","sourcePort":"didMount","targetId":"78d42752-fe03-ab05-22a5-d339508275b6","targetPort":"call"},{"sourceId":"78d42752-fe03-ab05-22a5-d339508275b6","sourcePort":"out-qrCodeId","targetId":"ef02af28-2b68-184e-a77e-7d6f79340401","targetPort":"in-qrCodeId"},{"sourceId":"ef02af28-2b68-184e-a77e-7d6f79340401","sourcePort":"out-products","targetId":"ed0936f2-ebbb-a6ad-bcb1-7b166b03e859","targetPort":"items"},{"sourceId":"78d42752-fe03-ab05-22a5-d339508275b6","sourcePort":"success","targetId":"ef02af28-2b68-184e-a77e-7d6f79340401","targetPort":"call"},{"sourceId":"ef02af28-2b68-184e-a77e-7d6f79340401","sourcePort":"out-count","targetId":"1fbb4d60-2f12-7d81-e3bd-0ec77bf72ca3","targetPort":"input"},{"sourceId":"07c2cfda-1a29-74c4-5198-66c0e0a82ff2","sourcePort":"pm-qrcode","targetId":"e4689dfc-eb00-3dfb-8343-cd35474b0741","targetPort":"text"},{"sourceId":"ef02af28-2b68-184e-a77e-7d6f79340401","sourcePort":"out-count","targetId":"9545e4a2-e1e5-a818-7cd8-9edff285df50","targetPort":"value"},{"sourceId":"ef02af28-2b68-184e-a77e-7d6f79340401","sourcePort":"success","targetId":"9545e4a2-e1e5-a818-7cd8-9edff285df50","targetPort":"do"},{"sourceId":"b8ccd5b9-0b2c-335c-694d-a715a74cb007","sourcePort":"value","targetId":"5b17a736-ed19-2e43-c685-e3ee14d72764","targetPort":"value"},{"sourceId":"5b17a736-ed19-2e43-c685-e3ee14d72764","sourcePort":"savedValue","targetId":"6449da6e-8b0f-acd8-4cc0-8f159f5eec54","targetPort":"condition"},{"sourceId":"78d42752-fe03-ab05-22a5-d339508275b6","sourcePort":"out-orgId","targetId":"a0d650c4-ba33-7797-d6a6-e7a49687ed57","targetPort":"in-orgId"},{"sourceId":"78d42752-fe03-ab05-22a5-d339508275b6","sourcePort":"success","targetId":"a0d650c4-ba33-7797-d6a6-e7a49687ed57","targetPort":"call"},{"sourceId":"a0d650c4-ba33-7797-d6a6-e7a49687ed57","sourcePort":"out-name","targetId":"3c61a67f-b483-416c-f863-7435a461e071","targetPort":"orgName"},{"sourceId":"5b17a736-ed19-2e43-c685-e3ee14d72764","sourcePort":"changed","targetId":"6449da6e-8b0f-acd8-4cc0-8f159f5eec54","targetPort":"eval"},{"sourceId":"78d42752-fe03-ab05-22a5-d339508275b6","sourcePort":"out-NoCode","targetId":"ebcf8650-6d4d-2c30-d91f-1991dea0a09d","targetPort":"navigate"},{"sourceId":"bdcc69ab-2b2c-d5bc-9907-a42d0e8497f9","sourcePort":"this","targetId":"f177c62d-3376-8f02-4252-e3e20aab9519","targetPort":"DomElement"},{"sourceId":"a0d650c4-ba33-7797-d6a6-e7a49687ed57","sourcePort":"out-stripeId","targetId":"f177c62d-3376-8f02-4252-e3e20aab9519","targetPort":"StripeAccount"},{"sourceId":"5b17a736-ed19-2e43-c685-e3ee14d72764","sourcePort":"savedValue","targetId":"f177c62d-3376-8f02-4252-e3e20aab9519","targetPort":"Amount"},{"sourceId":"f177c62d-3376-8f02-4252-e3e20aab9519","sourcePort":"Text","targetId":"458e5984-55e8-c63a-383e-39aa07aa83a0","targetPort":"text"},{"sourceId":"f177c62d-3376-8f02-4252-e3e20aab9519","sourcePort":"Text","targetId":"458e5984-55e8-c63a-383e-39aa07aa83a0","targetPort":"text"},{"sourceId":"a0d650c4-ba33-7797-d6a6-e7a49687ed57","sourcePort":"success","targetId":"18370dc6-ea68-8287-a5d4-cb98e9137aee","targetPort":"on"},{"sourceId":"1fc88291-cdb2-601c-1b0d-3b74692f4185","sourcePort":"onClick","targetId":"f177c62d-3376-8f02-4252-e3e20aab9519","targetPort":"Run"},{"sourceId":"18370dc6-ea68-8287-a5d4-cb98e9137aee","sourcePort":"state","targetId":"04863008-1aee-1d00-eb84-962246f37f3e","targetPort":"mounted"},{"sourceId":"04863008-1aee-1d00-eb84-962246f37f3e","sourcePort":"didMount","targetId":"6449da6e-8b0f-acd8-4cc0-8f159f5eec54","targetPort":"eval"},{"sourceId":"a0d650c4-ba33-7797-d6a6-e7a49687ed57","sourcePort":"out-stripeId","targetId":"41731cc8-c0a8-4c94-49ec-a5ea11c5b47b","targetPort":"condition"},{"sourceId":"6449da6e-8b0f-acd8-4cc0-8f159f5eec54","sourcePort":"ontrue","targetId":"41731cc8-c0a8-4c94-49ec-a5ea11c5b47b","targetPort":"eval"},{"sourceId":"41731cc8-c0a8-4c94-49ec-a5ea11c5b47b","sourcePort":"ontrue","targetId":"f177c62d-3376-8f02-4252-e3e20aab9519","targetPort":"Run"},{"sourceId":"41731cc8-c0a8-4c94-49ec-a5ea11c5b47b","sourcePort":"ontrue","targetId":"97cdd6d4-9862-da83-2044-a10a2c78868e","targetPort":"Run"},{"sourceId":"a0d650c4-ba33-7797-d6a6-e7a49687ed57","sourcePort":"out-stripeId","targetId":"97cdd6d4-9862-da83-2044-a10a2c78868e","targetPort":"StripeAccount"},{"sourceId":"5b17a736-ed19-2e43-c685-e3ee14d72764","sourcePort":"savedValue","targetId":"97cdd6d4-9862-da83-2044-a10a2c78868e","targetPort":"Amount"},{"sourceId":"94df4f1e-3443-8955-7e80-e37315182f19","sourcePort":"onClick","targetId":"97cdd6d4-9862-da83-2044-a10a2c78868e","targetPort":"ConfirmPayment"},{"sourceId":"b369c29d-8df2-d505-6949-84d8b7de83fb","sourcePort":"this","targetId":"97cdd6d4-9862-da83-2044-a10a2c78868e","targetPort":"DomElement"}],"ports":[],"roots":["e7166d36-0977-2637-c065-89a1688edc23"]},{"name":"/Pages/QR-Code/OrgDetails","nodes":[{"id":"20d3300f-589f-709d-a200-53d84f6a748c","type":"Group","parameters":{"sizeMode":"contentHeight"},"ports":[],"children":[{"id":"bb8fd53b-5262-5a29-ff92-41cb4c4c0f09","type":"Text","parameters":{"textAlignX":"center"},"ports":[],"children":[]}]},{"id":"90cf288e-128a-f2e6-8351-46e35b42e57b","type":"Component Inputs","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"90cf288e-128a-f2e6-8351-46e35b42e57b","sourcePort":"orgName","targetId":"bb8fd53b-5262-5a29-ff92-41cb4c4c0f09","targetPort":"text"}],"ports":[{"name":"orgId","type":"*","plug":"input","index":1},{"name":"Fetch","type":"*","plug":"input","index":2},{"name":"orgName","type":{"name":"string","multiline":true},"default":"Text","group":"Text","plug":"input","index":3}],"roots":["20d3300f-589f-709d-a200-53d84f6a748c"]},{"name":"/Pages/QR-Code/Extracted component","nodes":[{"id":"9dccd20d-56c9-6bf5-86f0-eb5eb9ae71ad","type":"JavaScriptFunction","parameters":{"functionScript":"const paymentMode = Inputs.Paymentmode || 'payment';\nconst totalAmount = Inputs.Amount || 100;\nconst localCurrency = Inputs.Currency || 'eur';\nconst dom = Inputs.DomElement.getDOMElement();\nconst stripeAccount = Inputs.StripeAccount || '';\nlet options = ''; \n\nif(stripeAccount === '') {\n  Outputs.Error = \"No Stripe Account\";\n  Outputs.Failure();\n}\nelse {\n  Outputs.Error = stripeAccount;\nconst stripe = Stripe(Inputs.APIKey);\n\nif( Inputs.Variant === 'expressCheckout' && stripeAccount != ''){\n  options = {\n    mode: paymentMode,\n    amount: totalAmount,\n    currency: localCurrency,\n    onBehalfOf: stripeAccount,\n  };\n}\nif( Inputs.Variant === 'payment' && stripeAccount != ''){\n  options = {\n    layout: {\n    type: 'accordion',\n    defaultCollapsed: false,\n    radios: true,\n    spacedAccordionItems: false\n    },\n    mode: paymentMode,\n    amount: totalAmount,\n    currency: localCurrency,\n    onBehalfOf: stripeAccount,\n    payment_method_types: ['card'],\n  };\n}\n\nif (options != ''){\nconst elements = stripe.elements(options);\nconst stripeElement = elements.create(Inputs.Variant);\nstripeElement.mount(dom);  \n\n// Listen for card element changes and handle validation errors\nstripeElement.on('change', (event) => {\n  const errorElement = document.getElementById(dom);\n  if (event.error) {\n    // Display the error message\n    Outputs.Error = event.error.message;\n  } else {\n    // Clear the error message\n    Outputs.Error  = '';\n  }\n});\n\n\nstripeElement.on('confirm', async (event) => {\n  Outputs.Options = options;\n  Outputs.Elements = elements;\n  Outputs.Spinner();\n  Outputs.CreatePaymentIntend();\n\n  });\n }}"},"ports":[{"name":"in-Paymentmode","displayName":"Paymentmode","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-Amount","displayName":"Amount","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-Currency","displayName":"Currency","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-DomElement","displayName":"DomElement","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-StripeAccount","displayName":"StripeAccount","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-APIKey","displayName":"APIKey","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-Variant","displayName":"Variant","plug":"input","type":"*","group":"Inputs","index":10},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"out-Spinner","displayName":"Spinner","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"out-CreatePaymentIntend","displayName":"CreatePaymentIntend","plug":"output","type":"signal","group":"Outputs","index":13},{"name":"out-Error","displayName":"Error","plug":"output","type":"*","group":"Outputs","index":14},{"name":"out-Options","displayName":"Options","plug":"output","type":"*","group":"Outputs","index":15},{"name":"out-Elements","displayName":"Elements","plug":"output","type":"*","group":"Outputs","index":16}],"children":[]},{"id":"018d462c-20eb-0b0d-387a-36ddf34978d6","type":"/#Visual Component/Loading Spinner","parameters":{},"ports":[],"children":[]},{"id":"038bf5cc-0807-8e1f-3446-6c33ef5265a9","type":"JavaScriptFunction","parameters":{"functionScript":"const num = Inputs.Amount;\n\n    // Replace comma with dot if present, to standardize the number format\n    let standardizedNum = num.toString().replace(',', '.');\n\n    // Convert the string to a floating-point number\n    let parsedNum = parseFloat(standardizedNum);\n\n    // Multiply the number by 100 to shift the decimal point two places\n    let transformedNum = Math.round(parsedNum * 100);\n\nOutputs.normalized = transformedNum;\n"},"ports":[{"name":"in-Amount","displayName":"Amount","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-normalized","displayName":"normalized","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"07c8f5c7-b172-10c0-665d-8389117d183f","type":"CloudFunction2","parameters":{"function":"StripePaymentIntend"},"ports":[],"children":[]},{"id":"69747d5f-affa-74a5-44f1-5bb89c771a47","type":"JavaScriptFunction","parameters":{"functionScript":"const stripe = Inputs.Stripe;\n\n elements = Inputs.Elements;\n clientSecret = Inputs.ClientSecret; \n const {error} = await stripe.confirmPayment({\n    elements,\n    clientSecret,\n    confirmParams: {\n      return_url: Inputs.ReturnUrl + '/order/123/complete',\n    },\n  });\n\n  Outputs.Success();"},"ports":[{"name":"in-Stripe","displayName":"Stripe","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-Elements","displayName":"Elements","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-ClientSecret","displayName":"ClientSecret","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-ReturnUrl","displayName":"ReturnUrl","plug":"input","type":"*","group":"Inputs","index":7},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":8}],"children":[]},{"id":"003ede35-a64a-867e-9c8c-584c859ecf8f","type":"/#Visual Component/Show Toast","parameters":{},"ports":[],"children":[]},{"id":"fad8bb53-4212-4582-67fd-c88977e541d6","type":"DbConfig","parameters":{"configKey":"stripePublicAPIKey"},"ports":[],"children":[]},{"id":"b5234c5a-6a8a-1a98-f2c6-fb297979ac29","type":"DbConfig","parameters":{"configKey":"frontURL","useDevValue":true,"devValue":"https://discusses-fewer-adapters-regional.trycloudflare.com"},"ports":[],"children":[]},{"id":"455d99a8-56df-6d7b-6c3b-048d536cd5f0","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"682edc21-57ac-c2b9-dfa5-2e3126f03827","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"930d3c68-e31d-033b-e91a-33ec0287329f","type":"States","parameters":{"states":"payment,expressCheckout"},"ports":[],"children":[]}],"connections":[{"sourceId":"fad8bb53-4212-4582-67fd-c88977e541d6","sourcePort":"value","targetId":"9dccd20d-56c9-6bf5-86f0-eb5eb9ae71ad","targetPort":"in-APIKey"},{"sourceId":"038bf5cc-0807-8e1f-3446-6c33ef5265a9","sourcePort":"out-normalized","targetId":"9dccd20d-56c9-6bf5-86f0-eb5eb9ae71ad","targetPort":"in-Amount"},{"sourceId":"9dccd20d-56c9-6bf5-86f0-eb5eb9ae71ad","sourcePort":"out-Spinner","targetId":"018d462c-20eb-0b0d-387a-36ddf34978d6","targetPort":"Show"},{"sourceId":"9dccd20d-56c9-6bf5-86f0-eb5eb9ae71ad","sourcePort":"out-CreatePaymentIntend","targetId":"07c8f5c7-b172-10c0-665d-8389117d183f","targetPort":"call"},{"sourceId":"07c8f5c7-b172-10c0-665d-8389117d183f","sourcePort":"failure","targetId":"003ede35-a64a-867e-9c8c-584c859ecf8f","targetPort":"Do"},{"sourceId":"07c8f5c7-b172-10c0-665d-8389117d183f","sourcePort":"out-error","targetId":"003ede35-a64a-867e-9c8c-584c859ecf8f","targetPort":"Message"},{"sourceId":"07c8f5c7-b172-10c0-665d-8389117d183f","sourcePort":"success","targetId":"69747d5f-affa-74a5-44f1-5bb89c771a47","targetPort":"run"},{"sourceId":"69747d5f-affa-74a5-44f1-5bb89c771a47","sourcePort":"out-Success","targetId":"018d462c-20eb-0b0d-387a-36ddf34978d6","targetPort":"Hide"},{"sourceId":"b5234c5a-6a8a-1a98-f2c6-fb297979ac29","sourcePort":"value","targetId":"69747d5f-affa-74a5-44f1-5bb89c771a47","targetPort":"in-ReturnUrl"},{"sourceId":"455d99a8-56df-6d7b-6c3b-048d536cd5f0","sourcePort":"DomElement","targetId":"9dccd20d-56c9-6bf5-86f0-eb5eb9ae71ad","targetPort":"in-DomElement"},{"sourceId":"455d99a8-56df-6d7b-6c3b-048d536cd5f0","sourcePort":"Run","targetId":"9dccd20d-56c9-6bf5-86f0-eb5eb9ae71ad","targetPort":"run"},{"sourceId":"455d99a8-56df-6d7b-6c3b-048d536cd5f0","sourcePort":"StripeAccount","targetId":"9dccd20d-56c9-6bf5-86f0-eb5eb9ae71ad","targetPort":"in-StripeAccount"},{"sourceId":"455d99a8-56df-6d7b-6c3b-048d536cd5f0","sourcePort":"Amount","targetId":"038bf5cc-0807-8e1f-3446-6c33ef5265a9","targetPort":"in-Amount"},{"sourceId":"455d99a8-56df-6d7b-6c3b-048d536cd5f0","sourcePort":"Hide","targetId":"018d462c-20eb-0b0d-387a-36ddf34978d6","targetPort":"Hide"},{"sourceId":"9dccd20d-56c9-6bf5-86f0-eb5eb9ae71ad","sourcePort":"out-Error","targetId":"682edc21-57ac-c2b9-dfa5-2e3126f03827","targetPort":"Text"},{"sourceId":"455d99a8-56df-6d7b-6c3b-048d536cd5f0","sourcePort":"CheckoutType","targetId":"930d3c68-e31d-033b-e91a-33ec0287329f","targetPort":"currentState"},{"sourceId":"930d3c68-e31d-033b-e91a-33ec0287329f","sourcePort":"currentState","targetId":"9dccd20d-56c9-6bf5-86f0-eb5eb9ae71ad","targetPort":"in-Variant"},{"sourceId":"9dccd20d-56c9-6bf5-86f0-eb5eb9ae71ad","sourcePort":"out-Options","targetId":"07c8f5c7-b172-10c0-665d-8389117d183f","targetPort":"in-Options"},{"sourceId":"455d99a8-56df-6d7b-6c3b-048d536cd5f0","sourcePort":"ConfirmPayment","targetId":"07c8f5c7-b172-10c0-665d-8389117d183f","targetPort":"call"}],"ports":[{"name":"Text","type":{"name":"*"},"plug":"output","index":0},{"name":"DomElement","type":"*","group":"Inputs","plug":"input","index":0},{"name":"Run","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":1},{"name":"StripeAccount","type":"*","group":"Inputs","plug":"input","index":2},{"name":"Amount","type":"*","group":"Inputs","plug":"input","index":3},{"name":"Hide","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":4},{"name":"ConfirmPayment","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":7},{"name":"CheckoutType","type":{"name":"enum","enums":["payment","expressCheckout"]},"default":"payment","group":"States","plug":"input","index":8}],"roots":[]},{"name":"/#Visual Component/Loading Spinner","nodes":[{"id":"7ce5bb45-5efa-2883-d28c-206955467d6d","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"b8c0224a-1d7f-03fa-e96c-bd8a233204fc","type":"NavigationShowPopup","parameters":{"target":"/#Visual Component/Loading Spinner/Loader Component"},"ports":[],"children":[]},{"id":"4e76b5e3-35f5-e861-7764-002a527e59f6","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"59c41fac-63b8-dee2-f0c3-a1e009b6635e","type":"JavaScriptFunction","parameters":{"functionScript":"// Decrease loading spinner running counter\nNoodl.Variables.NumLoadingSpinnerRunning--\n\n// When we reach zero, hide the loading spinner\nif(Noodl.Variables.NumLoadingSpinnerRunning < 1)\n    Noodl.Events.emit(\"Hide loader\");"},"ports":[],"children":[]},{"id":"4c3a837c-0194-26d3-0d2e-39c6f001afc6","type":"JavaScriptFunction","parameters":{"functionScript":"// If we have multiple show signals sent, only update the\n// running count\nif(Noodl.Variables.NumLoadingSpinnerRunning > 0)\n    Noodl.Variables.NumLoadingSpinnerRunning++\nelse {\n    // If this is the first show signal, show the popup\n    Noodl.Variables.NumLoadingSpinnerRunning = 1\n    Outputs.ShowPopup()\n}"},"ports":[{"name":"out-ShowPopup","displayName":"ShowPopup","plug":"output","type":"signal","group":"Outputs","index":4}],"children":[]}],"connections":[{"sourceId":"b8c0224a-1d7f-03fa-e96c-bd8a233204fc","sourcePort":"Closed","targetId":"4e76b5e3-35f5-e861-7764-002a527e59f6","targetPort":"Done"},{"sourceId":"7ce5bb45-5efa-2883-d28c-206955467d6d","sourcePort":"Hide","targetId":"59c41fac-63b8-dee2-f0c3-a1e009b6635e","targetPort":"run"},{"sourceId":"7ce5bb45-5efa-2883-d28c-206955467d6d","sourcePort":"Show","targetId":"4c3a837c-0194-26d3-0d2e-39c6f001afc6","targetPort":"run"},{"sourceId":"4c3a837c-0194-26d3-0d2e-39c6f001afc6","sourcePort":"out-ShowPopup","targetId":"b8c0224a-1d7f-03fa-e96c-bd8a233204fc","targetPort":"show"}],"ports":[{"name":"Done","type":"signal","plug":"output","index":1},{"name":"Show","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":1},{"name":"Hide","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":2}],"roots":[]},{"name":"/#Visual Component/Loading Spinner/Loader Component","nodes":[{"id":"ed0bbf6e-09fa-e9e7-4a83-d6a9d5ac9422","type":"Group","parameters":{"position":"absolute","width":{"value":100,"unit":"vw"},"height":{"value":100,"unit":"vh"},"backgroundColor":"#FFFFFF7F"},"ports":[],"children":[{"id":"645c7fdd-db14-d4b5-dc86-4668fe096a7b","type":"Image","parameters":{"src":"Rolling-1s-200px.svg","sizeMode":"explicit","position":"absolute","alignX":"center","alignY":"center","width":{"value":100,"unit":"px"},"height":{"value":100,"unit":"px"}},"ports":[],"children":[]}]},{"id":"b52bc871-dfaa-72f9-0430-bd6a972e947c","type":"NavigationClosePopup","parameters":{},"ports":[],"children":[]},{"id":"e7afc58e-b060-b1ee-7381-fe637d26e58c","type":"JavaScriptFunction","parameters":{"functionScript":"Noodl.Events.on(\"Hide loader\", function () {\n    Outputs.hide();\n});"},"ports":[{"name":"out-hide","displayName":"hide","plug":"output","type":"signal","group":"Outputs","index":4}],"children":[]},{"id":"3d466ffa-569e-3277-4414-dedbd27a02e3","type":"States","parameters":{"states":"Show,Hide","currentState":"Hide","values":"opacity","value-Show-opacity":1,"value-Hide-opacity":0},"ports":[],"children":[]}],"connections":[{"sourceId":"ed0bbf6e-09fa-e9e7-4a83-d6a9d5ac9422","sourcePort":"didMount","targetId":"3d466ffa-569e-3277-4414-dedbd27a02e3","targetPort":"to-Show"},{"sourceId":"e7afc58e-b060-b1ee-7381-fe637d26e58c","sourcePort":"out-hide","targetId":"3d466ffa-569e-3277-4414-dedbd27a02e3","targetPort":"to-Hide"},{"sourceId":"3d466ffa-569e-3277-4414-dedbd27a02e3","sourcePort":"reached-Hide","targetId":"b52bc871-dfaa-72f9-0430-bd6a972e947c","targetPort":"close"},{"sourceId":"3d466ffa-569e-3277-4414-dedbd27a02e3","sourcePort":"opacity","targetId":"ed0bbf6e-09fa-e9e7-4a83-d6a9d5ac9422","targetPort":"opacity"}],"ports":[],"roots":["ed0bbf6e-09fa-e9e7-4a83-d6a9d5ac9422"]}]